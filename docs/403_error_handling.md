# –ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ 403 –æ—à–∏–±–æ–∫ –≤ EuroAutoDataHub

## üÜï –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ 403

### üìã –û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

1. **–°—á–µ—Ç—á–∏–∫ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –æ—à–∏–±–æ–∫** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ 403 –æ—à–∏–±–æ–∫ –ø–æ–¥—Ä—è–¥
2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–∞—É–∑–∞** - –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞ (3 –æ—à–∏–±–∫–∏) –ø–∞—Ä—Å–µ—Ä –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –Ω–∞ 5 –º–∏–Ω—É—Ç
3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** - –ø–æ—Å–ª–µ –ø–∞—É–∑—ã –ø–∞—Ä—Å–µ—Ä –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç—É —Å —Ç–µ–∫—É—â–µ–π –ø–æ–∑–∏—Ü–∏–∏
4. **–°–±—Ä–æ—Å —Å—á–µ—Ç—á–∏–∫–∞** - –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ —Å—á–µ—Ç—á–∏–∫ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –æ—à–∏–±–æ–∫ –æ–±–Ω—É–ª—è–µ—Ç—Å—è

### ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ settings.py:

```python
# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ 403 –æ—à–∏–±–æ–∫ –∏ –ø–∞—É–∑
CONSECUTIVE_403_LIMIT = 3  # –ú–∞–∫—Å–∏–º—É–º –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö 403 –æ—à–∏–±–æ–∫
PAUSE_DURATION = 300  # –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–∞—É–∑—ã –≤ —Å–µ–∫—É–Ω–¥–∞—Ö (5 –º–∏–Ω—É—Ç)

# –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –∞–Ω—Ç–∏–±–æ—Ç –∑–∞—â–∏—Ç—ã
CONCURRENT_REQUESTS = 1  # –°–Ω–∏–∂–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
CONCURRENT_REQUESTS_PER_DOMAIN = 1
DOWNLOAD_DELAY = 3  # –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏
RANDOMIZE_DOWNLOAD_DELAY = 0.5  # –†–∞–Ω–¥–æ–º–∏–∑–∞—Ü–∏—è –∑–∞–¥–µ—Ä–∂–∫–∏
```

### üîÑ –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã:

1. **–ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ 403:**
   - –£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è —Å—á–µ—Ç—á–∏–∫ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –æ—à–∏–±–æ–∫
   - –ï—Å–ª–∏ —Å—á–µ—Ç—á–∏–∫ < 3: –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –ø–∞—Ä—Å–∏–Ω–≥ —Å–ª–µ–¥—É—é—â–µ–π –º–∞—Ä–∫–∏/—Å—Ç—Ä–∞–Ω–∏—Ü—ã
   - –ï—Å–ª–∏ —Å—á–µ—Ç—á–∏–∫ = 3: —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø–∞—É–∑–∞ –Ω–∞ 5 –º–∏–Ω—É—Ç

2. **–ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ:**
   - –°—á–µ—Ç—á–∏–∫ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –æ—à–∏–±–æ–∫ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –≤ 0
   - –ü–∞—Ä—Å–∏–Ω–≥ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –≤ –æ–±—ã—á–Ω–æ–º —Ä–µ–∂–∏–º–µ

3. **–í–æ –≤—Ä–µ–º—è –ø–∞—É–∑—ã:**
   - –í—Å–µ –≤—Ö–æ–¥—è—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è
   - –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è —Å—Ç–∞—Ç—É—Å –ø–∞—É–∑—ã
   - –ß–µ—Ä–µ–∑ 5 –º–∏–Ω—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ–∑–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Ä–∞–±–æ—Ç–∞

### üìä –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:

```
üö´ 403 –æ—à–∏–±–∫–∞ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ: parse_initial –¥–ª—è –º–∞—Ä–∫–∏ volkswagen
   –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö 403: 2/3
‚ö†Ô∏è  –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º —Ä–∞–±–æ—Ç—É. –î–æ –ø–∞—É–∑—ã –æ—Å—Ç–∞–ª–æ—Å—å 1 –æ—à–∏–±–æ–∫ 403

üö® –î–û–°–¢–ò–ì–ù–£–¢–û –ú–ê–ö–°–ò–ú–ê–õ–¨–ù–û–ï –ö–û–õ–ò–ß–ï–°–¢–í–û 403 –û–®–ò–ë–û–ö (3)
‚è∏Ô∏è  –°–¢–ê–í–ò–ú –ü–ê–†–°–ï–† –ù–ê –ü–ê–£–ó–£ –ù–ê 5 –ú–ò–ù–£–¢

‚èØÔ∏è  –í–û–ó–û–ë–ù–û–í–õ–Ø–ï–ú –†–ê–ë–û–¢–£ –ü–û–°–õ–ï –ü–ê–£–ó–´
   –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö 403 –æ—à–∏–±–æ–∫
```

### üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

–°–æ–∑–¥–∞–Ω —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç `scripts/test_403_handling.py` –∫–æ—Ç–æ—Ä—ã–π:
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ª–æ–≥–∏–∫—É —Å—á–µ—Ç—á–∏–∫–∞ 403 –æ—à–∏–±–æ–∫
- –¢–µ—Å—Ç–∏—Ä—É–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º –ø–∞—É–∑—ã –∏ –≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- –î–µ–ª–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ API –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞

### üîß –í–Ω–µ–¥—Ä–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

1. **Spider (otomoto.py):**
   - `_handle_403_error()` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ 403 —Å –ª–æ–≥–∏–∫–æ–π –ø–∞—É–∑—ã
   - `_resume_after_pause()` - –≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –ø–∞—É–∑—ã
   - `_reset_403_counter_on_success()` - —Å–±—Ä–æ—Å —Å—á–µ—Ç—á–∏–∫–∞ –ø—Ä–∏ —É—Å–ø–µ—Ö–µ

2. **Middleware (middlewares.py):**
   - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ 403 –æ—à–∏–±–æ–∫
   - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

3. **Settings (settings.py):**
   - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è 403 –æ–±—Ä–∞–±–æ—Ç–∫–∏
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

### üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç:

–ü–∞—Ä—Å–µ—Ä —Ç–µ–ø–µ—Ä—å –±–æ–ª–µ–µ —É—Å—Ç–æ–π—á–∏–≤ –∫ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞–º:
- –ù–µ –ø–∞–¥–∞–µ—Ç –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ 403 –æ—à–∏–±–æ–∫
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–µ–ª–∞–µ—Ç –ø–∞—É–∑—ã –¥–ª—è "–æ—Å—Ç—ã–≤–∞–Ω–∏—è"
- –ü—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç—É –ø–æ—Å–ª–µ –ø–∞—É–∑—ã
- –ê–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –∫ –∞–Ω—Ç–∏–±–æ—Ç —Å–∏—Å—Ç–µ–º–∞–º —Å–∞–π—Ç–∞

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–∞—Ä—Å–µ—Ä—É —Ä–∞–±–æ—Ç–∞—Ç—å –¥–ª–∏—Ç–µ–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –±–µ–∑ —Ä—É—á–Ω–æ–≥–æ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞, –¥–∞–∂–µ –ø—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ–π –∞–Ω—Ç–∏–±–æ—Ç –∑–∞—â–∏—Ç–µ –Ω–∞ —Å–∞–π—Ç–µ otomoto.pl.
